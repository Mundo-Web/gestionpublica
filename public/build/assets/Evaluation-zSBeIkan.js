var S=Object.defineProperty;var _=(t,a,n)=>a in t?S(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n;var b=(t,a,n)=>(_(t,typeof a!="symbol"?a+"":a,n),n);import{R as e,r as d}from"./HtmlContent-TT1qJ6UJ.js";import{c as B}from"./ReactAppend-eu1i41_3.js";import{C as R}from"./CreateReactScript-Eox_dAvx.js";import{S as q}from"./OfferCard-LiDsDtK5.js";import{B as F}from"./BasicRest-szwNhfy8.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./index-jLuiGAeD.js";import"./CreateReactScript-cqrtON1y.js";import"./axios-_sX4vCAy.js";import"./main-jzs2GwAM.js";class I extends F{constructor(){super(...arguments);b(this,"path","attemp-details")}}const A=new I,D=({evaluation:t,questions:a,attemp:n})=>{const[i,M]=d.useState(a),[h,y]=d.useState(0),[u,N]=d.useState(0),x=i.findIndex(({done:r})=>!r),m=i[x],c={hours:Math.floor(t.duration/60),minutes:t.duration%60};d.useEffect(()=>{const r=moment(n.created_at),l=t.duration*60,E=setInterval(()=>{const o=moment().diff(r,"seconds"),v=o/l*100,C=Math.min(v,100);y(C),N(o)},1e3);return()=>clearInterval(E)},[n.created_at,t.duration]);const g=Math.floor(u/3600),p=Math.floor(u%3600/60),w=u%60;let s="";g>0&&(s+=`${g}h `),p>0&&(s+=`${p}m `),(w>0||s==="")&&(s+=`${w}s`);const k=async()=>{const{isConfirmed:r}=await q.fire({title:"¿Estás seguro?",text:"No podras volver atras. Asegurate de haber marcado la respuesta correcta.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, continuar",cancelButtonText:"Cancelar"});if(!r)return;const l={question_id:m.id,answer_id:$('[name="answer"]:checked').val(),attemp_id:n.id};if(!await A.save(l))return;const f=structuredClone(i);f.forEach(o=>{o.id==m.id&&(o.done=!0)}),setAnswers(f)};return e.createElement(e.Fragment,null,e.createElement("section",null,e.createElement("div",{className:"flex flex-col lg:flex-row gap-10 justify-between items-center px-[5%] lg:px-[8%] py-10 bg-rose-50 font-poppins_regular"},e.createElement("div",{className:"flex gap-8 items-center max-w-3xl"},e.createElement("div",{className:""},e.createElement("div",{className:"text-2xl font-bold font-poppins_bold leading-none text-neutral-800 "},"Examen final: ",t.name),t.duration!=null&&e.createElement("div",{className:"mt-4 mb-2"},e.createElement("i",{className:"far fa-clock me-1"}),e.createElement("span",{className:"me-1"},"Duración"),e.createElement("span",null,c.hours>0&&e.createElement(e.Fragment,null,c.hours,"h")," ",c.minutes>0&&e.createElement(e.Fragment,null,c.minutes,"m"))),e.createElement("div",{className:"mt-2 text-base font-medium leading-6 text-gray-600 "},t.description))),t.duration==null&&e.createElement("button",{className:"px-6 py-3 text-sm font-semibold tracking-normal text-white bg-[#CF072C] rounded-xl"},"Completar después"))),e.createElement("section",{className:"px-[5%] lg:px-[8%] font-poppins_regular"},e.createElement("div",{className:"mx-auto mt-12 w-full max-w-3xl bg-white sticky top-4 p-4 pb-2 border rounded-md shadow-md"},e.createElement("p",{className:"mb-2"},"Tiempo transcurrido: ",s),e.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-4 dark:bg-gray-700"},e.createElement("div",{className:"bg-red-600 h-2.5 rounded-full dark:bg-red-500",style:{width:`${h}%`}}))),e.createElement("div",{className:"flex flex-col py-16 max-w-3xl mx-auto"},e.createElement("div",{className:"flex flex-col w-full max-md:max-w-full"},e.createElement("div",{className:"flex flex-col w-full font-semibold max-md:max-w-full"},e.createElement("div",{className:"text-lg leading-tight text-rose-700 max-md:max-w-full"},"Pregunta ",x+1),e.createElement("div",{className:"mt-2 text-xl tracking-normal leading-7 text-neutral-800 max-md:max-w-full"},m.name)),e.createElement("div",{className:"flex flex-col gap-4 mt-10 w-full text-base font-medium leading-6 text-gray-600 max-md:max-w-full"},m.random_answers.filter(Boolean).map((r,l)=>e.createElement("div",{key:`answer-${l}`},e.createElement("label",{htmlFor:`answer-${r.id}`,className:"flex items-center gap-4 p-5 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 dark:peer-checked:text-red-500 peer-checked:border-red-600 peer-checked:text-red-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700 peer-checked:bg-rose-50"},e.createElement("input",{type:"radio",id:`answer-${r.id}`,name:"answer",value:r.id,className:"peer w-4 h-4 text-red-600 bg-gray-100 border-gray-300 focus:ring-red-500 dark:focus:ring-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",required:!0}),e.createElement("div",{className:"w-full"},r.name)))))),e.createElement("div",{className:"flex flex-col lg:flex-row mt-16  text-sm tracking-normal text-white w-full gap-5 items-end"},e.createElement("button",{className:"font-semibold bg-[#CF072C] rounded-2xl w-max text-center py-4 px-8",onClick:()=>k()},"Responder")))))};R((t,a)=>{B(t).render(e.createElement(D,{...a}))});
