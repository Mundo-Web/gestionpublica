var F=Object.defineProperty;var R=(t,r,a)=>r in t?F(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;var v=(t,r,a)=>(R(t,typeof r!="symbol"?r+"":r,a),a);import{j as e}from"./HtmlContent-MplZTE2r.js";import{r as x}from"./index-TT1qJ6UJ.js";import{c as I}from"./ReactAppend-Y0JQgEOA.js";import{C as A}from"./CreateReactScript-QuaDmwri.js";import{S as y}from"./OfferCard-mSyxeypM.js";import{B as T}from"./BasicRest-hjYVP1Sk.js";import{A as D}from"./AttempsRest-wcd1LXN_.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./index-jtdEOcur.js";import"./CreateReactScript-gj-POL85.js";import"./axios-_sX4vCAy.js";import"./main-jzs2GwAM.js";class M extends T{constructor(){super(...arguments);v(this,"path","attemp-details")}}const z=new D,N=new M,P=({evaluation:t,questions:r,attemp:a})=>{const[i,k]=x.useState(r),[p,C]=x.useState(0),[u,B]=x.useState(0),f=i.findIndex(({done:s})=>!s),o=i[f],m={hours:Math.floor(t.duration/60),minutes:t.duration%60};x.useEffect(()=>{const s=moment(a.created_at),n=t.duration*60,c=setInterval(()=>{const d=moment().diff(s,"seconds"),_=d/n*100,q=Math.min(_,100);C(q),B(d),p>=100&&(clearInterval(c),g())},1e3);return()=>clearInterval(c)},[a.created_at,t.duration]);const w=Math.floor(u/3600),b=Math.floor(u%3600/60),j=u%60;let l="";w>0&&(l+=`${w}h `),b>0&&(l+=`${b}m `),(j>0||l==="")&&(l+=`${j}s`);const E=async()=>{const{isConfirmed:s}=await y.fire({title:"¿Estás seguro?",text:"No podras volver atras. Asegurate de haber marcado la respuesta correcta.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, continuar",cancelButtonText:"Cancelar"});if(!s)return;const n={question_id:o.id,answer_id:$('[name="answer"]:checked').val(),attemp_id:a.id},c=await N.save(n);if($('[name="answer"]').prop("checked",!1),!c)return;const h=structuredClone(i);h.forEach(d=>{d.id==o.id&&(d.done=!0)}),k(h)},S=async()=>{const{isConfirmed:s}=await y.fire({title:"¿Estás seguro?",text:"Estas a punto de finalizar esta evaluacion. Asegurate de haber marcado la respuesta correcta.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, finalizar",cancelButtonText:"Cancelar"});if(!s)return;const n={question_id:o.id,answer_id:$('[name="answer"]:checked').val(),attemp_id:a.id};await N.save(n)&&g()},g=async()=>{z.delete(a.id)&&(location.href=`/micuenta/evaluation-finished/${t.id}`)};return o?e.jsxs(e.Fragment,{children:[e.jsx("section",{children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-10 justify-between items-center px-[5%] lg:px-[8%] py-10 bg-rose-50 font-poppins_regular",children:[e.jsx("div",{className:"flex gap-8 items-center max-w-3xl",children:e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"text-2xl font-bold font-poppins_bold leading-none text-neutral-800 ",children:["Examen final: ",t.name]}),e.jsxs("div",{className:"mt-4 mb-2",children:[t.duration!=null&&e.jsxs("div",{children:[e.jsx("i",{className:"far fa-clock w-6 block text-center"}),e.jsx("span",{className:"me-1",children:"Duración"}),e.jsxs("span",{children:[m.hours>0&&e.jsxs(e.Fragment,{children:[m.hours,"h"]})," ",m.minutes>0&&e.jsxs(e.Fragment,{children:[m.minutes,"m"]})]})]}),e.jsxs("div",{children:[e.jsx("i",{className:"fas fa-question w-6 block text-center"}),e.jsxs("span",{className:"me-1",children:[i.length," preguntas"]})]})]}),e.jsx("div",{className:"mt-2 text-base font-medium leading-6 text-gray-600 ",children:t.description})]})}),t.duration==null&&e.jsx("a",{href:`/micuenta/session/${t.course.uuid}/${t.id}`,className:"px-6 py-3 text-sm font-semibold tracking-normal text-white bg-[#CF072C] rounded-xl",children:"Completar después"})]})}),e.jsxs("section",{className:"px-[5%] lg:px-[8%] font-poppins_regular",children:[t.duration!=null&&e.jsxs("div",{className:"mx-auto mt-12 w-full max-w-3xl bg-white sticky top-4 p-4 pb-2 border rounded-md shadow-md",children:[e.jsxs("p",{className:"mb-2",children:["Tiempo transcurrido: ",l]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-4 dark:bg-gray-700",children:e.jsx("div",{className:"bg-red-600 h-2.5 rounded-full dark:bg-red-500",style:{width:`${p}%`}})})]}),e.jsxs("div",{className:"flex flex-col py-16 max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col w-full max-md:max-w-full",children:[e.jsxs("div",{className:"flex flex-col w-full font-semibold max-md:max-w-full",children:[e.jsxs("div",{className:"text-lg leading-tight text-rose-700 max-md:max-w-full",children:["Pregunta ",f+1]}),e.jsx("div",{className:"mt-2 text-xl tracking-normal leading-7 text-neutral-800 max-md:max-w-full",children:o.name})]}),e.jsx("div",{className:"flex flex-col gap-4 mt-10 w-full text-base font-medium leading-6 text-gray-600 max-md:max-w-full",children:o.random_answers.filter(Boolean).map((s,n)=>e.jsx("div",{children:e.jsxs("label",{htmlFor:`answer-${s.id}`,className:"flex items-center gap-4 p-5 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 dark:peer-checked:text-red-500 peer-checked:border-red-600 peer-checked:text-red-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700 peer-checked:bg-rose-50",children:[e.jsx("input",{type:"radio",id:`answer-${s.id}`,name:"answer",value:s.id,className:"peer w-4 h-4 text-red-600 bg-gray-100 border-gray-300 focus:ring-red-500 dark:focus:ring-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",required:!0}),e.jsx("div",{className:"w-full",children:s.name})]})},`answer-${n}`))})]}),e.jsx("div",{className:"flex flex-col lg:flex-row mt-16  text-sm tracking-normal text-white w-full gap-5 items-end",children:f==i.length-1?e.jsx("button",{className:"font-semibold bg-[#CF072C] rounded-2xl w-max text-center py-4 px-8",onClick:()=>S(),children:"Finalizar evaluación"}):e.jsx("button",{className:"font-semibold bg-[#CF072C] rounded-2xl w-max text-center py-4 px-8",onClick:()=>E(),children:"Responder"})})]})]})]}):g()};A((t,r)=>{I(t).render(e.jsx(P,{...r}))});
